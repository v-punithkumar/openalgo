option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: "app:app"
  aws:elasticbeanstalk:application:environment:
    PYTHONPATH: "/var/app/current:$PYTHONPATH"

container_commands:
  01_create_directories:
    command: |
      mkdir -p /var/app/current/strategies/scripts
      mkdir -p /var/app/current/log/strategies
      mkdir -p /var/app/current/keys
      mkdir -p /var/app/current/db
      mkdir -p /var/app/current/tmp
  02_set_permissions:
    command: |
      chmod 755 /var/app/current/strategies
      chmod 755 /var/app/current/strategies/scripts
      chmod 755 /var/app/current/log
      chmod 755 /var/app/current/log/strategies
      chmod 700 /var/app/current/keys
      chmod 755 /var/app/current/db
      chmod 755 /var/app/current/tmp
  03_set_ownership:
    command: |
      chown -R webapp:webapp /var/app/current/strategies
      chown -R webapp:webapp /var/app/current/log
      chown -R webapp:webapp /var/app/current/keys
      chown -R webapp:webapp /var/app/current/db
      chown -R webapp:webapp /var/app/current/tmp

